<!DOCTYPE html>
<html>

<head>
    <title>CARPHA - Research Ethics Committee</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Mobile support -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Material Design fonts -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Material Design -->
    <link href="dist/css/bootstrap-material-design.css" rel="stylesheet">
    <link href="dist/css/ripples.min.css" rel="stylesheet">
    <!-- Dropdown.js -->
    <link href="http://cdn.rawgit.com/FezVrasta/dropdown.js/master/jquery.dropdown.css" rel="stylesheet">
    <!-- Page style -->
    <link href="index.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="scripts/jquery.min.js"></script>
</head>

<body>
    <div class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/carpha">
                    <img src='image/logo.png' />
                </a>
            </div>
            <div class="navbar-collapse collapse navbar-responsive-collapse">
                <ul class="nav navbar-nav">
                    <!-- LEFT NAVIGATIONAL ELEMENTS -->
                    <li>
                        <a href="about.html">About the REC</a>
                    </li>
                    <li>
                        <a href="glossary.html">Glossary</a>
                    </li>
                    <li>
                        <a href="proposal.html">Submit a Proposal</a>
                    </li>
                    <li>
                        <a href="contact.html">Contact</a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <!-- RIGHT NAVIGATIONAL ELEMENTS -->
                    <li>
                        <div class="btn-group btn-group-raised ">
                            <a href="login.html" class="btn ">Sign in</a>
                            <a href="register.html" class="btn ">Register</a>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class='row'>
        <div class='container'>
            <!-- MAIN CONTAINER -->
            <ol class="breadcrumb">
                <li><a href='/carpha'>Home</a></li>
                <li class="active">Role Assignment</li>
            </ol>
            <div class="panel panel-primary">
                <div class="panel-body">
                    <div class="col-md-12">
                        <div class='search-box'>
                            <input type='search' placeholder='Search..' name='q' />
                            <button class='glyphicon glyphicon-search srch'></button>
                        </div>
                        <table class='proposal-table'>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Email</th>
                                    <th>Name</th>
                                    <th>Role</th>
                                    <th>Date Created</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tfoot>
                                <tr>
                                    <td colspan=6><a href=''>Previous</a><a href=''>1</a><a href=''>2</a><a href=''>3</a><a href=''>Next</a></td>
                                </tr>
                            </tfoot>
                            <tbody>
                                <tr>
                                    <td>3453</td>
                                    <td><a href=''>john.doe@gmail.com</a></td>
                                    <td><a target="_blank" href='profile.html?id=1'>Steve Doe</a></td>
                                    <td><span>Admin</span>
                                        <div class="edit-role">
                                            <button class='glyphicon glyphicon-ok btn-save' data-toggle="modal" data-target="#edit-deadline-dialog"></button>
                                            <button class='glyphicon glyphicon-remove btn-cancel' data-toggle="modal" data-target="#edit-deadline-dialog"></button>
                                        </div>
                                    </td>
                                    <td>04-03-2016</td>
                                    <td>
                                        <a class='glyphicon glyphicon-pencil btn-edit'></a>
                                        <a href='' class='glyphicon glyphicon-remove'></a>
                                        <a href='' class='glyphicon glyphicon-search'></a>
                                    </td>
                                </tr>
                             

                                                             <tr>
                                    <td>222</td>
                                    <td><a href=''>john2.doe@gmail.com</a></td>
                                    <td><a target="_blank" href='profile.html?id=1'>Steve Doe</a></td>
                                    <td><span>SuperUser</span>
                                        <div class="edit-role">
                                            <button class='glyphicon glyphicon-ok btn-save' data-toggle="modal" data-target="#edit-deadline-dialog"></button>
                                            <button class='glyphicon glyphicon-remove btn-cancel' data-toggle="modal" data-target="#edit-deadline-dialog"></button>
                                        </div>
                                    </td>
                                    <td>04-03-2016</td>
                                    <td>
                                        <a class='glyphicon glyphicon-pencil btn-edit'></a>
                                        <a href='' class='glyphicon glyphicon-remove'></a>
                                        <a href='' class='glyphicon glyphicon-search'></a>
                                    </td>
                                </tr>


                                                                <tr>
                                    <td>113</td>
                                    <td><a href=''>john1.doe@gmail.com</a></td>
                                    <td><a target="_blank" href='profile.html?id=1'>Steve Doe</a></td>
                                    <td><span>Reviewer</span>
                                        <div class="edit-role">
                                            <button class='glyphicon glyphicon-ok btn-save' data-toggle="modal" data-target="#edit-deadline-dialog"></button>
                                            <button class='glyphicon glyphicon-remove btn-cancel' data-toggle="modal" data-target="#edit-deadline-dialog"></button>
                                        </div>
                                    </td>
                                    <td>04-03-2016</td>
                                    <td>
                                        <a class='glyphicon glyphicon-pencil btn-edit'></a>
                                        <a href='' class='glyphicon glyphicon-remove'></a>
                                        <a href='' class='glyphicon glyphicon-search'></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class='row'>
        <div class='container'>
            <div class='col-md-2'>
                <img src='image/utt.png' class='foot-logo' alt='UTT' /> Copyright &copy; 2016 by The University of Trinidad and Tobago
            </div>
            <div class='col-md-4 col-md-offset-1'>
                <ul>
                    <li><a href='about.html'>ABOUT THE REC</a></li>
                    <li><a href='glossary.html'>GLOSSARY</a></li>
                    <li><a href='proposal.html'>SUBMIT A PROPOSAL</a></li>
                    <li><a href='contact.html'>CONTACT</a></li>
            </div>
            <div class='col-md-4'>
            </div>
        </div>
    </footer>
    <!-- Open source code -->
    <script>
    window.page = window.location.hash || "#about";

    $(document).ready(function() {
        if (window.page != "#about") {
            $(".menu").find("li[data-target=" + window.page + "]").trigger("click");
        }
    });

    $(window).on("resize", function() {
        $("html, body").height($(window).height());
        $(".main, .menu").height($(window).height() - $(".header-panel").outerHeight());
        $(".pages").height($(window).height());
    }).trigger("resize");

    var selectedCurrentRole = null
    var roles = ["Admin", "SuperUser", "Reviewer", "Researcher"]

    $(".btn-edit").click(function(e) {
        e.preventDefault()
        $("tbody").addClass("overlay")
        var roleTag = $(this).parent().siblings()[3]
        $(roleTag).addClass("spotlight ");
        selectedCurrentRole = $(roleTag).find("span").text()

        var roleMenu = "<select>"
        for (var i = 0; i < roles.length; i++) {
            role = roles[i]
            if (role === selectedCurrentRole) {
                roleMenu += "<option selected>" + role + "</option>"
            } else {
                roleMenu += "<option>" + role + "</option>"
            }
        }
        roleMenu += "</select>"

        $(roleTag).find("span").replaceWith(roleMenu);

    });

    $(".btn-save").click(function(e) {
        e.preventDefault();
  
        var roleTag = $(this).parent().parent()
        
        selectedCurrentRole = null

        var newRole = encodeURIComponent($(roleTag).find("select option:selected").text());
        var idOfuser = encodeURIComponent($($(roleTag).siblings()[0]).text());

        $(location).attr('href', 'edit_role.php?newrole=' + newRole+"&id="+idOfuser)

    });



    $(".btn-cancel").click(function(e) {
        e.preventDefault();
        $("tbody").removeClass("overlay")
        var roleTag = $(this).parent().parent()
        $(roleTag).removeClass("spotlight")
        $(roleTag).find("select").replaceWith("<span>"+selectedCurrentRole+"</span>")
        selectedCurrentRole = null
    });

    $(".menu li").click(function() {
        // Menu
        if (!$(this).data("target")) return;
        if ($(this).is(".active")) return;
        $(".menu li").not($(this)).removeClass("active");
        $(".page").not(page).removeClass("active").hide();
        window.page = $(this).data("target");
        var page = $(window.page);
        window.location.hash = window.page;
        $(this).addClass("active");


        page.show();

        var totop = setInterval(function() {
            $(".pages").animate({
                scrollTop: 0
            }, 0);
        }, 1);

        setTimeout(function() {
            page.addClass("active");
            setTimeout(function() {
                clearInterval(totop);
            }, 1000);
        }, 100);
    });

    function cleanSource(html) {
        var lines = html.split(/\n/);

        lines.shift();
        lines.splice(-1, 1);

        var indentSize = lines[0].length - lines[0].trim().length,
            re = new RegExp(" {" + indentSize + "}");

        lines = lines.map(function(line) {
            if (line.match(re)) {
                line = line.substring(indentSize);
            }

            return line;
        });

        lines = lines.join("\n");

        return lines;
    }

    $("#opensource").click(function() {
        $.get(window.location.href, function(data) {
            var html = $(data).find(window.page).html();
            html = cleanSource(html);
            $("#source-modal pre").text(html);
            $("#source-modal").modal();
        });
    });

    function changeInstit(el) {
        var instData = [{
            "phone": "664-6681",
            "address": "#1,3 & 6 Mc Carthy Street, St. Augustine, Trinidad W.I.",
            "image": "image/institutions/samtt.png"
        }, {
            "phone": "662-2002",
            "address": "The University of the West Indies St. Augustine, Trinidad and Tobago",
            "image": "image/institutions/uwi.png"
        }, {
            "phone": "642-8888 Ext. 21125",
            "address": "John Donaldson Campus Wrightson Road, Port of Spain",
            "image": "image/institutions/utt.png"
        }, {
            "phone": "671-2551/2872",
            "address": "#120 Montrose Main Road, Chaguanas, Trinidad, West Indies",
            "image": "image/institutions/cts.png"
        }, ];
        console.log(instData);
        addr_el = document.getElementById("inst-address")
        addr_el.value = instData[(el.value - 1)].address;
        addr_el.parentNode.className = addr_el.parentNode.className.replace(/\sis-empty/, '');
        phone_el = document.getElementById("inst-phone")
        phone_el.value = instData[(el.value - 1)].phone;
        phone_el.parentNode.className = phone_el.parentNode.className.replace(/\sis-empty/, '');
        image_el = document.getElementById("inst-image");
        image_el.setAttribute("src", instData[(el.value - 1)].image);
    }
    </script>
    <!-- Twitter Bootstrap -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!-- Material Design for Bootstrap -->
    <script src="dist/js/material.js"></script>
    <script src="dist/js/ripples.min.js"></script>
    <script>
    $.material.init();
    </script>
    <!-- Dropdown.js -->
    <script src="https://cdn.rawgit.com/FezVrasta/dropdown.js/master/jquery.dropdown.js"></script>
    <script>
    $("#dropdown-menu select").dropdown();
    </script>
</body>

</html>
